{
  "_comment": "Sharkoder Configuration - VP9 Encoding Profile",
  "_description": "Configuration optimisée pour encodage VP9 avec support GPU (vp9_nvenc) et fallback CPU (libvpx-vp9)",
  "_created": "2025-11-07",

  "encode_preset": "p7",
  "cq": 32,
  "cpu_preset": "medium",
  "cpu_crf": 31,

  "remote_host": "",
  "remote_user": "",
  "remote_password": "",
  "remote_path": "",
  "local_temp": "",
  "local_backup": "",

  "webdav_enabled": false,
  "webdav_url": "",
  "webdav_username": "",
  "webdav_password": "",
  "webdav_path": "/",
  "webdav_transfer_mode": "auto",

  "max_concurrent_downloads": 2,
  "max_prefetch_files": 3,
  "retry_attempts": 2,
  "connection_timeout": 30000,

  "ffmpeg_options": {
    "hwaccel": "cuda",
    "video_codec": "vp9_nvenc",
    "_codec_note": "Options: vp9_nvenc (GPU), libvpx-vp9 (CPU), hevc_nvenc (GPU HEVC), libx265 (CPU HEVC)",
    "audio_codec": "opus",
    "_audio_note": "Opus recommandé pour VP9/WebM, AAC pour MP4, ou 'copy' pour conserver original",
    "audio_bitrate": 128,
    "profile": "auto",
    "_profile_note": "VP9 n'utilise pas de profils comme HEVC, laisser 'auto'",
    "two_pass": true,
    "extra_options": []
  },

  "notification_settings": {
    "show_completion_notifications": true,
    "show_error_notifications": true,
    "minimize_to_tray": true
  },

  "advanced": {
    "connection": {
      "max_concurrent_downloads": 2,
      "max_prefetch_files": 3,
      "retry_attempts": 2,
      "connection_timeout": 30000
    },
    "behavior": {
      "log_level": "info",
      "auto_start_queue": false,
      "verify_checksums": true,
      "create_backups": true,
      "extract_video_duration": true,
      "release_tag": "Z3D",
      "keep_encoded": true,
      "keep_original": true,
      "simulation_mode": false
    }
  },

  "ffmpeg": {
    "gpu_enabled": true,
    "force_gpu": false,
    "_force_gpu_note": "Mettre à true pour forcer GPU sans test (utile si test échoue mais GPU fonctionnel)",
    "gpu_limit": 100,
    "_gpu_limit_note": "Limite utilisation GPU (%). < 100 réduit lookahead/bframes/multipass automatiquement",

    "encode_preset": "p7",
    "_preset_note": "NVENC presets: p1 (rapide) à p7 (lent/qualité). Recommandé: p6-p7",
    "cq": 32,
    "_cq_note": "Constant Quality pour GPU (0-51). Recommandé: 28-35. Plus bas = meilleure qualité",

    "rc_mode": "vbr_hq",
    "_rc_mode_note": "Rate control: vbr_hq (recommandé), constqp, vbr, cbr",
    "bitrate": "3M",
    "_bitrate_note": "Bitrate moyen (en M ou k). Exemple: 3M pour 1080p, 5M pour 4K",
    "maxrate": "5M",
    "_maxrate_note": "Bitrate max (en M ou k). Généralement 1.5-2× bitrate moyen",

    "lookahead": 32,
    "_lookahead_note": "Frames lookahead (0-32). Plus élevé = meilleure qualité. Max: 32",
    "bframes": 2,
    "_bframes_note": "B-frames (0-4). Recommandé: 2-3. Plus = meilleure compression",
    "b_ref_mode": "each",
    "_b_ref_mode_note": "B-frame reference: disabled, each (recommandé), middle",

    "spatial_aq": true,
    "_spatial_aq_note": "Adaptive Quantization spatiale. Toujours activer pour meilleure qualité",
    "temporal_aq": true,
    "_temporal_aq_note": "Adaptive Quantization temporelle. Toujours activer pour meilleure qualité",
    "aq_strength": 8,
    "_aq_strength_note": "Force AQ (1-15). Recommandé: 8-10",

    "multipass": "fullres",
    "_multipass_note": "disabled, qres (rapide), fullres (recommandé). Améliore qualité",

    "cpu_preset": "medium",
    "_cpu_preset_note": "CPU preset si GPU indisponible: fast, medium (recommandé), slow",
    "crf": 31,
    "_crf_note": "Constant Rate Factor pour CPU (15-63). Recommandé VP9: 31-35, HEVC: 23-28",

    "audio_codec": "opus",
    "_audio_codec_options": "opus (recommandé VP9/WebM), aac (MP4), copy (conserver original)",
    "audio_bitrate": 128,
    "_audio_bitrate_note": "Bitrate audio en kbps. Opus: 96-128, AAC: 128-192",

    "two_pass": true,
    "_two_pass_note": "Encodage 2-pass. Recommandé pour VP9 CPU, optionnel pour GPU",

    "tune": null,
    "_tune_note": "Tuning profile (HEVC uniquement). Options: grain, fastdecode, zerolatency. null = auto",
    "profile": "auto",
    "_profile_note": "VP9: laisser 'auto'. HEVC: main, main10 (10-bit HDR)"
  },

  "remote": {
    "transfer_method": "auto",
    "_transfer_method_note": "auto (détection), sftp, webdav",
    "sftp": {
      "host": "",
      "user": "",
      "password": "",
      "path": ""
    },
    "webdav": {
      "url": "",
      "username": "",
      "password": "",
      "path": "/"
    }
  },

  "storage": {
    "local_temp": "",
    "_local_temp_note": "Dossier temporaire pour téléchargements. Exemple: D:\\Sharkoder\\cache",
    "local_backup": "",
    "_local_backup_note": "Dossier backup avant upload. Exemple: D:\\Sharkoder\\backup",
    "download_path": "",
    "_download_path_note": "Dossier fichiers téléchargés. Exemple: D:\\Sharkoder\\download"
  },

  "ui": {
    "show_notifications": true,
    "minimize_to_tray": true
  },

  "_quality_presets": {
    "_note": "Configurations prédéfinies pour différents cas d'usage",

    "ultra_quality_gpu": {
      "video_codec": "vp9_nvenc",
      "encode_preset": "p7",
      "cq": 28,
      "rc_mode": "vbr_hq",
      "bitrate": "5M",
      "maxrate": "8M",
      "lookahead": 32,
      "bframes": 3,
      "multipass": "fullres",
      "two_pass": true,
      "audio_codec": "opus",
      "audio_bitrate": 160
    },

    "balanced_gpu": {
      "video_codec": "vp9_nvenc",
      "encode_preset": "p6",
      "cq": 32,
      "rc_mode": "vbr_hq",
      "bitrate": "3M",
      "maxrate": "5M",
      "lookahead": 24,
      "bframes": 2,
      "multipass": "qres",
      "two_pass": false,
      "audio_codec": "opus",
      "audio_bitrate": 128
    },

    "fast_gpu": {
      "video_codec": "vp9_nvenc",
      "encode_preset": "p4",
      "cq": 35,
      "rc_mode": "vbr",
      "bitrate": "2M",
      "maxrate": "3M",
      "lookahead": 16,
      "bframes": 1,
      "multipass": "disabled",
      "two_pass": false,
      "audio_codec": "opus",
      "audio_bitrate": 96
    },

    "cpu_quality": {
      "video_codec": "libvpx-vp9",
      "cpu_preset": "medium",
      "crf": 31,
      "two_pass": true,
      "audio_codec": "opus",
      "audio_bitrate": 128
    },

    "cpu_fast": {
      "video_codec": "libvpx-vp9",
      "cpu_preset": "fast",
      "crf": 35,
      "two_pass": false,
      "audio_codec": "opus",
      "audio_bitrate": 96
    }
  },

  "_migration_from_hevc": {
    "_note": "Si vous migrez depuis HEVC, ajustez ces paramètres",
    "cq_adjustment": "+3 à +5 (VP9 nécessite CQ légèrement plus élevé pour qualité équivalente)",
    "crf_adjustment": "+3 à +8 (VP9 CRF 31 ≈ HEVC CRF 23)",
    "container": "Utilisez .webm pour VP9 ou .mkv pour compatibilité universelle",
    "audio": "Passez à Opus pour meilleure compression (ou gardez AAC pour compatibilité)",
    "speed": "VP9 GPU ~10% plus lent que HEVC GPU, VP9 CPU ~5× plus lent que HEVC CPU"
  }
}
